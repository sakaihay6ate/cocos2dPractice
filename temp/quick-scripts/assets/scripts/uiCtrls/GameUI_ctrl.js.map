{"version":3,"sources":["GameUI_ctrl.js"],"names":["UI_ctrl","require","UI_manager","cc","Class","extends","properties","onLoad","prototype","call","console","log","view","addComponent","addButtonListener","clickPlay","groundY","y","height","timer","starDuration","score","spawnNewStar","loader","loadRes","err","prefab","item","instantiate","node","addChild","newStar","setPosition","getNewStarPosition","getComponent","game","minStarDuration","Math","random","maxStarDuration","randX","randY","player","jumpHeight","maxX","ground","width","v2","start"],"mappings":";;;;;;AAAA,IAAIA,UAAQC,QAAQ,SAAR,CAAZ;AACA,IAAIC,aAAWD,QAAQ,YAAR,CAAf;;AAEAE,GAAGC,KAAH,CAAS;AACLC,aAASL,OADJ;;AAGLM,gBAAY,EAHP;;AAOL;;AAEAC,UATK,oBASK;AACNP,gBAAQQ,SAAR,CAAkBD,MAAlB,CAAyBE,IAAzB,CAA8B,IAA9B;AACAC,gBAAQC,GAAR,CAAY,KAAKC,IAAjB;AACA,aAAKA,IAAL,CAAU,QAAV,EAAoBC,YAApB,CAAiC,QAAjC;;AAEA;AACA;;AAEAX,mBAAWY,iBAAX,CAA6B,KAAKF,IAAL,CAAU,UAAV,CAA7B,EAAmD,IAAnD,EAAwD,KAAKG,SAA7D;AACA;AACA,aAAKC,OAAL,GAAe,KAAKJ,IAAL,CAAU,QAAV,EAAoBK,CAApB,GAAwB,KAAKL,IAAL,CAAU,QAAV,EAAoBM,MAApB,GAA6B,CAApE;AACA,aAAKC,KAAL,GAAa,CAAb;AACA,aAAKC,YAAL,GAAoB,CAApB;;AAEA;AACA,aAAKC,KAAL,GAAa,CAAb;AACH,KAzBI;AA0BLC,gBA1BK,0BA0BU;AACXnB,WAAGoB,MAAH,CAAUC,OAAV,CAAkB,MAAlB,EAA0B,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AAC7C,gBAAIC,OAAOxB,GAAGyB,WAAH,CAAeF,MAAf,CAAX;AACA,iBAAKG,IAAL,CAAUC,QAAV,CAAmBH,IAAnB;AACA;AACH,SAJD;AAKA;AACA,aAAKE,IAAL,CAAUC,QAAV,CAAmBC,OAAnB;AACAA,gBAAQC,WAAR,CAAoB,KAAKC,kBAAL,EAApB;AACAF,gBAAQG,YAAR,CAAqB,MAArB,EAA6BC,IAA7B,GAAoC,IAApC;AACA,aAAKf,YAAL,GAAoB,KAAKgB,eAAL,GAAuBC,KAAKC,MAAL,MAAiB,KAAKC,eAAL,GAAuB,KAAKH,eAA7C,CAA3C;AACA,aAAKjB,KAAL,GAAa,CAAb;AACH,KAtCI;AAuCLc,sBAvCK,gCAuCgB;AACjB,YAAIO,QAAQ,CAAZ;AACA,YAAIC,QAAQ,KAAKzB,OAAL,GAAeqB,KAAKC,MAAL,KAAgB,KAAKI,MAAL,CAAYR,YAAZ,CAAyB,QAAzB,EAAmCS,UAAlE,GAA+E,EAA3F;AACA,YAAIC,OAAO,KAAKC,MAAL,CAAYC,KAAZ,GAAoB,CAA/B;AACAN,gBAAQ,CAACH,KAAKC,MAAL,KAAgB,GAAjB,IAAwB,CAAxB,GAA4BM,IAApC;AACA,eAAOzC,GAAG4C,EAAH,CAAMP,KAAN,EAAaC,KAAb,CAAP;AACH,KA7CI;AA8CL1B,aA9CK,uBA8CM;AACPL,gBAAQC,GAAR;AAEH,KAjDI;AAkDLqC,SAlDK,mBAkDI,CAER;AApDI;AAqDL;AArDJ","file":"GameUI_ctrl.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\uiCtrls","sourcesContent":["var UI_ctrl=require(\"UI_ctrl\");\r\nvar UI_manager=require(\"UI_manager\");\r\n\r\ncc.Class({\r\n    extends: UI_ctrl,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        UI_ctrl.prototype.onLoad.call(this);\r\n        console.log(this.view)\r\n        this.view['Player'].addComponent('player')\r\n\r\n        // this.view['Player'].getComponent().jumpHeight.set(200);\r\n        // console.log(this.view['Player'].getProperties('jumpHeight'));\r\n        \r\n        UI_manager.addButtonListener(this.view['btn_play'],this,this.clickPlay);\r\n        //anchor為中心點所以要再往上1/2高\r\n        this.groundY = this.view['ground'].y + this.view['ground'].height / 2;\r\n        this.timer = 0;\r\n        this.starDuration = 0;\r\n\r\n        // this.spawnNewStar();\r\n        this.score = 0;\r\n    },\r\n    spawnNewStar() {\r\n        cc.loader.loadRes('star', function (err, prefab) {\r\n            let item = cc.instantiate(prefab);\r\n            this.node.addChild(item);\r\n            // item.addComponent(uiName + \"_ctrl\");\r\n        });\r\n        // let newStar = cc.instantiate(this.star);\r\n        this.node.addChild(newStar);\r\n        newStar.setPosition(this.getNewStarPosition());\r\n        newStar.getComponent('star').game = this;\r\n        this.starDuration = this.minStarDuration + Math.random() * (this.maxStarDuration - this.minStarDuration);\r\n        this.timer = 0;\r\n    },\r\n    getNewStarPosition() {\r\n        let randX = 0;\r\n        let randY = this.groundY + Math.random() * this.player.getComponent('player').jumpHeight + 30;\r\n        let maxX = this.ground.width / 2;\r\n        randX = (Math.random() - 0.5) * 2 * maxX;\r\n        return cc.v2(randX, randY);\r\n    },\r\n    clickPlay(){\r\n        console.log(`play game`);\r\n\r\n    },\r\n    start () {\r\n\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}