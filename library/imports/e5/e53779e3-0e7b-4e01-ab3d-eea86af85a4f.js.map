{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\player.js"],"names":["cc","Class","extends","Component","properties","jumpHeight","jumpDuration","maxMoveSpeed","accel","jumpAudio","default","type","AudioClip","setJumpAction","jumpUp","moveBy","v2","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","callback","callFunc","playJumpSound","repeatForever","sequence","audioEngine","playEffect","onKeyDown","event","keyCode","macro","KEY","a","accLeft","d","accRight","onKeyUp","onLoad","jumpAction","node","runAction","xSpeed","systemEvent","on","SystemEvent","EventType","KEY_DOWN","KEY_UP","onDestroy","off","start","update","dt","Math","abs","x"],"mappings":"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","file":"player.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        jumpHeight:0,\r\n        jumpDuration:0,\r\n        maxMoveSpeed:0,\r\n        accel:0,\r\n        jumpAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n    setJumpAction:function(){\r\n        let jumpUp=cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n        let jumpDown=cc.moveBy(this.jumpDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n        let callback=cc.callFunc(this.playJumpSound,this)\r\n        return cc.repeatForever(cc.sequence(jumpUp,jumpDown,callback));\r\n    },\r\n    playJumpSound(){\r\n        cc.audioEngine.playEffect(this.jumpAudio,false);\r\n    },\r\n    onKeyDown(event){\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.a:\r\n                this.accLeft=true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight=true;\r\n                break;\r\n        }\r\n    },\r\n    onKeyUp(event){\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.a:\r\n                this.accLeft=false;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight=false;\r\n                break;\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function() {\r\n        this.jumpAction=this.setJumpAction();\r\n        this.node.runAction(this.jumpAction);\r\n\r\n        //加速度方向開關\r\n        this.accLeft=false;\r\n        this.accRight=false;\r\n\r\n        this.xSpeed=0;\r\n\r\n        //init keyboard input listener\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        if(this.accLeft){\r\n            this.xSpeed-=this.accel*dt;\r\n        }else if(this.accRight){\r\n            this.xSpeed+=this.accel*dt;\r\n        }\r\n        if(Math.abs(this.xSpeed)>this.maxMoveSpeed){\r\n            this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed);\r\n        }\r\n        this.node.x += this.xSpeed * dt;\r\n    },\r\n});\r\n"]}